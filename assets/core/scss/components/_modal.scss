@use '../tokens' as *;
@use '../mixins' as *;
@use '../mixins/rtl' as rtl;
@use '../components/button' as *;

.tutor-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: $tutor-z-modal;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--tutor-spacing-4, 8px);

  &-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #00000099;
    backdrop-filter: blur(20px);
  }

  &-content {
    position: relative;
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    background-color: $tutor-surface-l1;
    border-radius: $tutor-radius-3xl;
    box-shadow: 0px 4px 104.9px 0px #00000040;
  }

  &-header {
    @include tutor-flex(column);
    gap: $tutor-spacing-2;
    padding: $tutor-spacing-7 $tutor-spacing-7 $tutor-spacing-none $tutor-spacing-7;
  }

  &-title {
    @include tutor-typography('h5', 'semibold', 'secondary', 'heading');
  }

  &-subtitle {
    @include tutor-typography('p3', 'regular', 'secondary', 'body');
  }

  &-body {
    padding: $tutor-spacing-7;
  }

  &-close {
    @extend .tutor-btn;
    @include tutor-button-icon-size(x-small);
    @include tutor-button-variant(ghost);
    position: absolute;
    top: $tutor-spacing-4;
    right: $tutor-spacing-4;
  }

  &-footer {
    @include tutor-flex(row, center, flex-end);
    gap: $tutor-spacing-4;
    padding: $tutor-spacing-6 $tutor-spacing-7 $tutor-spacing-6 $tutor-spacing-7;
    border-top: 1px solid $tutor-border-idle;
  }
}

.tutor-modal {
  transition: all 0.2s ease;

  &.tutor-modal-enter {
    .tutor-modal-backdrop {
      opacity: 0;
    }

    .tutor-modal-content {
      opacity: 0;
      transform: scale(0.95) translateY(-20px);
    }
  }

  &.tutor-modal-enter-active {
    .tutor-modal-backdrop {
      opacity: 1;
      transition: opacity 0.2s ease;
    }

    .tutor-modal-content {
      opacity: 1;
      transform: scale(1) translateY(0);
      transition:
        opacity 0.2s ease,
        transform 0.2s ease;
    }
  }

  &.tutor-modal-leave {
    .tutor-modal-backdrop {
      opacity: 1;
    }

    .tutor-modal-content {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  &.tutor-modal-leave-active {
    .tutor-modal-backdrop {
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .tutor-modal-content {
      opacity: 0;
      transform: scale(0.95) translateY(-20px);
      transition:
        opacity 0.2s ease,
        transform 0.2s ease;
    }
  }
}

// Tutor-prefixed reusable transition utilities (no Tailwind)
.tutor-fade-enter {
  transition: opacity 300ms ease-out;
}

.tutor-fade-enter-start {
  opacity: 0;
}

.tutor-fade-enter-end {
  opacity: 1;
}

.tutor-fade-leave {
  transition: opacity 150ms ease-in;
}

.tutor-fade-leave-start {
  opacity: 1;
}

.tutor-fade-leave-end {
  opacity: 0;
}

.tutor-enter {
  transition:
    opacity 150ms ease-out,
    transform 150ms ease-out;
}

.tutor-enter-start {
  opacity: 0;
  transform: translateY(16px) scale(0.95);
}

.tutor-enter-end {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.tutor-leave {
  transition:
    opacity 150ms ease-in,
    transform 150ms ease-in;
}

.tutor-leave-start {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.tutor-leave-end {
  opacity: 0;
  transform: translateY(16px) scale(0.95);
}

@include tutor-breakpoint-down(md) {
  .tutor-modal-content {
    max-height: 95vh;
    padding: $tutor-spacing-4 $tutor-spacing-4;
  }
}