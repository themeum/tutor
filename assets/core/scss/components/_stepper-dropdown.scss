@use '../tokens' as *;
@use '../mixins/typography' as *;


.tutor-stepper-dropdown {
	position: relative;
	@include tutor-typography('small', 'regular', 'primary', 'body');
	letter-spacing: 0;

	&.tutor-is-disabled {
		pointer-events: none;
	}

	&-control {
		display: flex;
		align-items: stretch;
		width: 100%;
		background: $tutor-surface-l1;
		border: 1px solid $tutor-border-idle;
		border-radius: $tutor-radius-md;
		overflow: hidden;

		&:focus-within {
			outline: 2px solid $tutor-border-brand-tertiary;
			outline-offset: -2px;
		}
	}

	&-stepper-container {
		display: flex;
		flex-direction: column;
		flex-shrink: 0;
	}

	&-stepper-btn {
		display: flex;
		align-items: center;
		justify-content: center;
		background: transparent;
		border: none;
		cursor: pointer;
		color: $tutor-icon-secondary;
		transition: background-color 0.2s ease, color 0.2s ease;
		flex: 1;

		&-up {
			padding-top: $tutor-spacing-3;
			padding-right: $tutor-spacing-5;
		}

		&-down {
			padding-bottom: $tutor-spacing-3;
			padding-right: $tutor-spacing-5;
		}

		&:hover:not(.tutor-is-disabled):not(:disabled) {
			background: $tutor-tab-l3-active-hover;
			color: $tutor-icon-hover;
		}

		&:active:not(.tutor-is-disabled):not(:disabled) {
			background: $tutor-tab-l3-active;
		}

		&.tutor-is-disabled,
		&:disabled {
			opacity: 0.4;
			cursor: not-allowed;
			pointer-events: none;
		}
	}

	&-value-wrapper {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: $tutor-spacing-4;
		flex: 1;
		padding: $tutor-spacing-4 $tutor-spacing-5;
		background: transparent;
		border: none;
		cursor: pointer;
		min-width: 0;

		&:focus {
			outline: none;
		}
	}

	&-value {
		display: flex;
		align-items: center;
		gap: $tutor-spacing-2;
		flex: 1;
		min-width: 0;

		&-icon {
			flex-shrink: 0;
			display: flex;
			align-items: center;
			color: $tutor-icon-secondary;
		}
	}

	&-placeholder {
		color: $tutor-text-subdued;
	}

	&-menu {
		position: absolute;
		left: 0;
		right: 0;
		z-index: $tutor-z-dropdown;
		background: $tutor-surface-l1;
		border-radius: $tutor-radius-md;
		max-height: 280px;
		overflow: auto;
		width: 100%;

		// Default positioning (bottom)
		&-bottom {
			top: calc(100% + 4px);
			bottom: auto;
		}

		// Top positioning
		&-top {
			bottom: calc(100% + 4px);
			top: auto;
		}

		// Fallback for when no position class is applied yet
		&:not(.tutor-stepper-dropdown-menu-top):not(.tutor-stepper-dropdown-menu-bottom) {
			top: calc(100% + 4px);
			bottom: auto;
		}
	}

	&-option {
		display: flex;
		align-items: center;
		gap: $tutor-spacing-5;
		padding: $tutor-spacing-4 $tutor-spacing-5;
		cursor: pointer;

		&-icon {
			flex-shrink: 0;
			display: flex;
			align-items: center;
			color: $tutor-icon-secondary;
			width: 16px;
			height: 16px;
		}

		&-label {
			flex: 1;
			min-width: 0;
		}

		&.tutor-is-highlighted {
			background: $tutor-tab-l3-active-hover;
		}

		&:hover:not(.tutor-is-disabled):not(.tutor-is-selected):not(.tutor-is-highlighted) {
			background: $tutor-tab-l3-active-hover;
		}

		&.tutor-is-disabled {
			color: $tutor-text-subdued;
			cursor: not-allowed;

			&:hover,
			&.tutor-is-highlighted {
				background: transparent;
			}
		}
	}
}

