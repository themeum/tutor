@use '@Core/scss/tokens' as *;
@use '@Core/scss/mixins' as *;

.tutor-comment {
	@include tutor-flex(row, flex-start, flex-start);
	gap: $tutor-spacing-4;
	width: 100%;
	position: relative;

	&-connector-line {
		position: absolute;
		top: 40px;
		left: 20px;
		pointer-events: none;
		z-index: $tutor-z-level;
		height: 0;
		min-height: 0;
		width: 0;

		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 1px;
			height: var(--vertical-height, 0);
			background-color: $tutor-border-idle;
			transition: height 0.3s ease;
		}

		&::after {
			content: '';
			position: absolute;
			bottom: 0;
			left: 0;
			width: var(--horizontal-width, 0);
			height: 1px;
			background-color: $tutor-border-idle;
			transition: width 0.3s ease;
		}
	}

	&-content {
		flex: 1;
		min-width: 0;
		@include tutor-flex(column, flex-start, flex-start);
		gap: $tutor-spacing-2;
		position: relative;
		@include padding-end($tutor-spacing-6);
	}

	&-author {
		@include tutor-typography('small', 'regular', 'primary');
	}

	&-time {
		@include tutor-typography('small', 'regular', 'subdued');
	}

	&-separator {
		color: $tutor-gray-500;
	}

	&-text {
		@include tutor-typography('p2', 'regular', 'primary');
		color: $tutor-gray-700;
	}

	&-actions {
		@include tutor-flex(row, center, flex-start);
		gap: $tutor-spacing-2;
		margin-top: $tutor-spacing-5;
	}

	&-action-btn {
		@include tutor-button-reset;
		@include tutor-flex(row, center, center);
		gap: $tutor-spacing-2;
		@include tutor-typography('small', 'regular', 'subdued');
		background: transparent;
		border-radius: $tutor-radius-md;
		cursor: pointer;
		transition: all 0.2s ease;

		svg {
			width: 16px;
			height: 16px;
			flex-shrink: 0;
		}

		&:hover {
			color: $tutor-text-primary;
		}

		&:active {
			background: $tutor-surface-l2;
		}

		&:focus {
			outline: none;
		}

		&-like + &-reply {
			margin-inline-start: $tutor-spacing-5;
		}

		&-menu {
			padding: $tutor-spacing-2;
			flex-shrink: 0;
			position: absolute;
			top: 20px;
			right: 0;
			z-index: $tutor-z-positive;
		}
	}

	&-reply-form {
		margin-top: $tutor-spacing-4;
		width: 100%;

		.tutor-text-area {
			@include tutor-textarea(142px);
		}
	}

	&-reply-actions {
		@include tutor-flex(row, center, space-between);
		width: 100%;
		gap: $tutor-spacing-3;
	}

	&-keyboard-hint {
		@include tutor-typography('tiny', 'regular', 'subdued');
		flex-shrink: 0;
	}

	&-replies-toggle {
		@include tutor-button-reset;
		@include tutor-flex(row, center, flex-start);
		gap: $tutor-spacing-2;
		margin-top: $tutor-spacing-3;
		@include tutor-typography('tiny', 'medium', 'primary', 'body');
		color: $tutor-text-brand;
		background: transparent;
		cursor: pointer;
		transition: all 0.2s ease;

		svg {
			width: 16px;
			height: 16px;
			flex-shrink: 0;
			transition: transform 0.2s ease;
		}

		&:hover {
			background: $tutor-button-primary-soft;
		}

		&:active {
			background: $tutor-button-primary-soft-hover;
		}
	}

	&-replies-count {
		@include tutor-typography('tiny', 'medium', 'brand', 'body');
	}

	&-replies-collapse {
		@include tutor-button-reset;
		margin-top: $tutor-spacing-3;
		@include tutor-typography('tiny', 'medium', 'primary', 'body');
		color: $tutor-text-brand;
		cursor: pointer;
		transition: all 0.2s ease;

		&:hover {
			background: $tutor-button-primary-soft;
		}

		&:active {
			background: $tutor-button-primary-soft-hover;
		}
	}

	&-replies {
		@include tutor-flex(column, flex-start, flex-start);
		gap: $tutor-spacing-6;
		margin-top: $tutor-spacing-4;
		width: 100%;
	}

	&-reply {
		@include padding-start($tutor-spacing-4);
		@include margin-start($tutor-spacing-2);

		.tutor-comment-content {
			min-width: 0;
		}
	}

	&-reply-actions {
		@include tutor-flex(row, center, space-between, wrap);
		width: 100%;
		gap: $tutor-spacing-2;
		margin-top: $tutor-spacing-3;
		min-width: 0;

		.tutor-comment-keyboard-hint {
			flex: 1;
			min-width: 0;
		}

		.tutor-comment-reply-buttons {
			@include tutor-flex(row, center, flex-start);
			gap: $tutor-spacing-2;
			flex-shrink: 0;
		}
	}
}

.tutor-comments-header {
	border-top: 1px solid $tutor-border-idle;
	border-bottom: 1px solid $tutor-border-idle;
	padding: $tutor-spacing-5 0;
	gap: $tutor-spacing-4;

	&-title {
		flex: 1;
		margin: 0;
	}
}

.tutor-comments-list {
	.tutor-comment {
		border-bottom: 1px solid $tutor-border-idle;
		padding-top: $tutor-spacing-6;
		padding-bottom: $tutor-spacing-6;
		margin-bottom: 0;

		&-reply {
			border-bottom: none;
			padding-bottom: 0;
			padding-top: 0;
		}

		&:last-child {
			border-bottom: none;
		}
	}
}

@include tutor-breakpoint-down(sm) {
	.tutor-comment {
		gap: $tutor-spacing-3;

		.tutor-avatar {
			width: 32px;
			height: 32px;
		}

		&-action-btn {
			svg {
				width: 14px;
				height: 14px;
			}
		}

		&-reply {
			@include padding-start($tutor-spacing-3);
			@include margin-start($tutor-spacing-1);
		}

		&-reply-actions {
			@include tutor-flex(column, stretch, flex-start);
			gap: $tutor-spacing-3;

			.tutor-comment-keyboard-hint {
				width: 100%;
				text-align: end;
			}

			.tutor-comment-reply-buttons {
				width: 100%;
				justify-content: flex-end;
			}
		}
	}
}



